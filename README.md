# 현재상황
- 매매식 일부 일반화 성공
- 1초에 5번 API 요청 제한을 최대한으로 활용할 방법
  
# BACADO_TARDE : 자동 매매 서비스
❓ Problem1 : 서버 기반으로 24시간 작동

❓ Problem2 : 개인별 클라우드

❓ Problem3 : 수수료

‼ Idea1 : 증권사 API를 통해 다양한 매매 기능을 구현할 수 있도록 하자.

‼ Idea2 : BACADO와 연결해서 사용할 수 있도록 하자.

💯 Solution : API 기반 자체 매매 프로그램을 만들자.

# 사용기술
- C#, Visual Studio(2019), Github

# 사용 API
- Kiwoom_open_api : 매매 기능

# 참고 회사
- 팡규의 자동 매매 프로그램, 번개트레이더

# 참고 자료
- 사이트 : https://fors.tistory.com/355
- 사이트 : https://joel-helloworld.tistory.com/68

# 특징
- 키움 API + 이베스트 API + 한국투자 API를 모두 활용해서 거래할 수 있다.
- 증권사간 교차거래를 통해 전략식 유출을 방지할 수 있다.
- 분할매도, 지연시간, 지수 연동 등 다양한 전략매매를 구현할 수 있다.
- BACADO와 연동하여 자신만의 특별한 매매전략을 구현할 수 있다.

# 기본 기능 요약
- 매매 전략 설정 및 실행 가볍게 작동
- 매매 현황 텔레그램 전송
- 개인 서버를 통해 24시간 가동

# 웹 기능 요약
- 다중 클라우드를 통해 거래중인 것을 한번에 관리할 것
- 시작-중단-전량매도-현재수익 등 기본 사항만 구현

# 매매 설정 타입
- 매수 : 매수 기능만 실행하며 사용자가 수동으로 매도
- 매도 : HTS 혹은 MTS를 통해 매수하고 자동으로 조건 매도 혹은 운영 시간 매도
- 매수 매도 : 매수 시간에 조건에 해당하는 종목 편입, 이후 매도 시간에 해당하는 종목 편입과 매도, 동시에 운영 시간에 따른 기본 매도 실행
- 없음 : 종목 검색 기능만 수행

# 5가지 매매 상태
- 대기 : 편입 후 아무 동작 없음
- 매수중 : 매수 주문이 들어간 상태
- 매수확인 : 매수가 완료된 상태
- 매도중 : 매도 주문이 들어간 상태
- 매도확인 : 매도가 완료된 상태
- 중복 : 중복 매수가 가능한 상태

# Timer
- 시간 확인 전용 1000ms
- 계좌 확인 전용 1000ms
- 주기 기능 전용 200ms

# 시간
- 운영 시간 : 익절, 손실에 대한 작동 시간
- 매수 시간 : 매수 종목 편입과 매수 주문 가능 시간
- 매도 시간 : 매도 종목 편입과 매도 주문 가능 시간
- 청산 시간 : 청산 기능 작동 시각

# 초기 동작 

# 매수 거래
- 초기 검출된 다중 종목에 대한 검사 + 편입 종목에 대한 검사 + 이전에 편입된 종목 중 편입 상태에 대한 검사
- 검사 : 매수 시간 + 매수 중복 + 상태
- 매수 거래는 code 기반으로 동시에 1번만 호출가능

# 매도 거래
- 실시간 가격 정보 호출마다 검사
- 매도 거래는 code 기반으로 동시에 1번만 호출가능

# 미체결
- 미체결 시간이 경과한 경우 매수를 일부 진행한 경우 매수확인으로 변경, 매수 시작도 못한 경우 대기로 변경

# 주의
- 매수 기능이 여러 곳에서 동시에 발생할 수 있으므로 동시에 동일 종목이 편입되는 것을 막기 위하여 buy_check을 종목만 점유하도록 설정 그리고 점유중 매매 상태를 변경하여 내부에 진입시 상태 재확인을 통한 처리 / 중복 허용은 제외
